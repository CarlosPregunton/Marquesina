PROCESSOR P16F887
INCLUDE<P16F887.INC>
     __CONFIG _CONFIG1,(_INTRC_OSC_NOCLKOUT & _WDT_OFF & _PWRTE_OFF & _MCLRE_OFF & _CP_OFF & _CPD_OFF & _BOR_OFF & _IESO_OFF & _FCMEN_OFF & _LVP_OFF & _DEBUG_OFF)
     __CONFIG _CONFIG2,(_WRT_OFF & _BOR40V)
     
     SALTO_TABLA  EQU 0x20
     C1  EQU 0x21
     C2  EQU 0x22
     C3  EQU 0x23
     C4  EQU 0x24
     C5  EQU 0x25
     C6  EQU 0x26
     C7  EQU 0x27
     C8  EQU 0x28
     VA  EQU 0x29
     VB  EQU 0x30
     VC  EQU 0x31
     C40 EQU 0x32 

     ORG   0x00
     BSF   STATUS,RP0
     BSF   STATUS,RP1         ;BANCO 3
     CLRF  ANSEL              ;LIMPIAR REGISTRO ANSEL
     CLRF  ANSELH             ;LIMPIAR REGISTRO ANSELH
     BSF   STATUS,RP0
     BCF   STATUS,RP1         ;BANCO 1
     CLRF  TRISA              ;PUERTO A COMO ENTRADA
     CLRF  TRISB              ;PUERTO B COMO SALIDA
     CLRF  TRISC              ;PUERTO C COMO SALIDA
     CLRF  TRISD              ;PUERTO D COMO SALIDA
     CLRF  TRISE              ;PUERTO E COMO SALIDA
     BCF   STATUS,RP1
     BCF   STATUS,RP0         ;BANCO 0
 C_R
    CLRF SALTO_TABLA          ;INICIALIZAR VARIABLES
    CLRF C1
    CLRF C2
    CLRF C3
	CLRF C4
	CLRF C5
	CLRF C6
	CLRF C7
	CLRF C8
    CLRF PORTB
    CLRF PORTC
C_P 
	MOVF  SALTO_TABLA,W        ;LLAMADA A LA TABLA
    CALL  TEX
	MOVWF C8                   ;VALOR QUE RETORNA LA TABLA EN C8

	MOVLW 0x28                 ;C40<-40
    MOVWF C40

    ;MOVLW 0x01                 ;C40<-1
    ;MOVWF C40

CP_40                          ;MOSTRAR INFORMACION
    MOVF  C8,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x80
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C7,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x40
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C6,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x20
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C5,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x10
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C4,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x08
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C3,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x04
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C2,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x02
    MOVWF PORTB
    CALL  RET_3ms

	MOVF  C1,W                 ;"BARRIDO DE COLUMNAS"
    MOVWF PORTC
    MOVLW 0x01
    MOVWF PORTB
    CALL  RET_3ms

    DECFSZ C40,F               ;VERIFICAR SI SE MOSTRO 40 VECES
    GOTO  CP_40                ;SALTAR EN CASO AFIRMATIVO
	
    MOVF  C2,W                 ;RECORRER COLUMNA A LA IZQUIERDA
    MOVWF C1
	MOVF  C3,W
    MOVWF C2
	MOVF  C4,W
    MOVWF C3
	MOVF  C5,W
    MOVWF C4
	MOVF  C6,W
    MOVWF C5
	MOVF  C7,W
    MOVWF C6
	MOVF  C8,W
    MOVWF C7

	INCF SALTO_TABLA,F
    MOVLW 0x54              ;VERIFICAR SI YA SE MOSTRARON
    SUBWF SALTO_TABLA,W     ;TODOS LOS DATOS DE LA TABLA
    BTFSS STATUS,Z
    GOTO  C_P
    GOTO  C_R               ;EMPEZAR DESDE INICIO
 TEX
  	ADDWF PCL,F

    RETLW 0x01;J
    RETLW 0x01
    RETLW 0x01
    RETLW 0xFF
    RETLW 0x00
    RETLW 0x00
    ;RETLW B'11111111';O
  	;RETLW B'10000001'
	;RETLW B'10000001'
	;RETLW B'11111111'
	;RETLW B'00000000'
	;RETLW B'00000000'
    ;RETLW B'11110001';S
	;RETLW B'10010001'
 	;RETLW B'10010001'
	;RETLW B'10010001'
	;RETLW B'10011111'
	;RETLW B'00000000'
	;RETLW B'00000000'
	;RETLW B'11111111';E
    ;RETLW B'10010001'
	;RETLW B'10010001'
	;RETLW B'10010001'
    ;RETLW B'10010001'
    ;RETLW B'10010001'
    ;RETLW B'00000000'
	;RETLW B'00000000'
	RETLW 0xFF;C
	RETLW 0x81
	RETLW 0x81
	RETLW 0x81
    RETLW 0x81
	RETLW 0x81
	RETLW 0x00
	RETLW 0x00
	;RETLW B'11111111';A
	;RETLW B'10010000'
	;RETLW B'10010000'
	;RETLW B'10010000'
	;RETLW B'10010000'
	;RETLW B'11111111'
	;RETLW B'00000000'
	;RETLW B'00000000'
	;RETLW B'11111111';R
	;RETLW B'10001000'
	;RETLW B'10010100'
	;RETLW B'11110011'
	;RETLW B'00000000'
	;RETLW B'00000000'
	;RETLW B'11111111';L
	;RETLW B'00000001'
	;RETLW B'00000001'
	;RETLW B'00000001'
	;RETLW B'00000001'
	;RETLW B'00000001'
	;RETLW B'00000000'
	;RETLW B'00000000'
	;RETLW B'11111111';O
  	;RETLW B'10000001'
	;RETLW B'10000001'
	;RETLW B'11111111'
	;RETLW B'00000000'
	;RETLW B'00000000'
	;RETLW B'11110001';S
	;RETLW B'10010001'
 	;RETLW B'10010001'
	;RETLW B'10010001'
	;RETLW B'10011111'
	;RETLW B'00000000'
	;RETLW B'00000000'
    RETLW 0xF1;S
	RETLW 0x91
 	RETLW 0x91
	RETLW 0x91
	RETLW 0x9F
	RETLW 0x00
	RETLW 0x00
	RETLW 0x00;G
	RETLW 0xFF
	RETLW 0x91
	RETLW 0x91
	RETLW 0x91
	RETLW 0x9F
	RETLW 0x00
	RETLW 0x00
RET_3ms
     MOVLW 0x03
     MOVWF VC
C_VC MOVLW 0x34
     MOVWF VB
C_VB MOVLW 0x03
     MOVWF VA
C_VA NOP
     NOP
     DECFSZ VA,F
     GOTO   C_VA
     DECFSZ VB,F
     GOTO   C_VB
     DECFSZ VC,F
     GOTO   C_VC
     RETURN
    END
